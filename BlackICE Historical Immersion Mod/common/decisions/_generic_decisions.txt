political_actions = {
	AI_ww1 = {
		icon = generic_political_discourse
	
		available = {
			is_ai = yes
			NOT = {
				has_country_flag = ww1_done
				AND = {
					tag = ETH
					is_subject = no
				}
			}
		}
		
		visible = {
			is_ai = yes
			NOT = {
				has_country_flag = ww1_done
				AND = {
					tag = ETH
					is_subject = no
				}
			}
		}
		
		fire_only_once = no
		days_remove = 1
		cost = 0
		
		complete_effect = {
			set_country_flag = ww1_done
			research_WW1 = yes
		}
		
		ai_will_do = {
			base = 500
		}
	}

	war_moving_the_capital = {
		icon = generic_political_discourse
		
		allowed = {
			always = no 
		}

		available = {
			capital_scope = {
				any_neighbor_state = {
					ROOT = {
						any_enemy_country = {
							divisions_in_state = {
								size > 0
								state = PREV.PREV
							}
						}
					}
				}
			}
		}

		visible = {
			
		}

		fire_only_once = no

		days_remove = 0

		cost = 5
		
		complete_effect = {
			move_capital = yes
		}

		ai_will_do = {
			factor = 0 
		}
	}
	
	targeted_race_for_the_bomb = {
		icon = generic_research

		allowed = {
			always = no
		}

		available = {
			#Target is FROM
			has_tech = atomic_research
			NOT = { 
				has_global_flag = first_nuke_dropped 
				has_idea = race_for_the_bomb
			}
		}

		#target_trigger = {
		#	#Target is FROM
		#	FROM = {
		# 		NOT = { is_in_faction_with = ROOT }
		#		has_tech = nuclear_reactor
		#		nuclear_reactor > 0
		#	}
		#}

		visible = {
            #Target is FROM
            has_tech = atomic_research
			NOT = { 
				has_global_flag = first_nuke_dropped 
				has_idea = race_for_the_bomb
			}
            FROM = {
        		NOT = { is_in_faction_with = ROOT }
				has_tech = nuclear_reactor
				nuclear_reactor > 0
			}
		}

		complete_effect = {
			set_country_flag = racing_for_the_bomb
			add_ideas = race_for_the_bomb
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				any_other_country = { has_tech = nukes }
			}
		}
	}
	rethink_goverment = {# ST recovery when ST < 0.3 and no civs
		icon = decision_revolt

		available = {
			has_stability < 0.4	
			has_war = no
		}

		visible = {
			has_stability < 0.4	
			has_war = no
			num_of_civilian_factories_available_for_projects < 11
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.01 #10% 
			consumer_goods_factor = 0.08
			political_power_gain = -1.5
			research_speed_factor = -0.50
			max_command_power = -90
			opposition_party_drift = 0.05
		}

		days_remove = 70
		days_re_enable = 90

		cost = 50

		complete_effect = {
			add_stability = 0.05
			
			set_temp_variable = { stability_weekly = 0.01 }
			
			set_temp_variable = { duration = 70 }
			
			EAI_stability_score_debug = yes
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.01 }
				
				set_temp_variable = { duration = 70 }
				
				EAI_dynamic_stability_score = yes
			}
		}
	}
	
	prevent_government_collapse_at_any_cost = {# ST recovery when ST < 0.3
		icon = decision_revolt

		available = {
			has_stability < 0.4	
			has_war = no
		}

		visible = {
			has_stability < 0.4	
			has_war = no
			num_of_civilian_factories_available_for_projects > 10
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.02 #20% 
			consumer_goods_factor = 0.08
			industrial_capacity_factory = -0.1
			political_power_gain = -1
			production_factory_max_efficiency_factor = -0.04
			production_factory_efficiency_gain_factor = -0.04
		}

		days_remove = 70
		days_re_enable = 90

		cost = 50

		complete_effect = {
			add_stability = 0.05
			
			set_temp_variable = { stability_weekly = 0.02 }
			
			set_temp_variable = { duration = 70 }
			
			EAI_stability_score_debug = yes
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.02 }
				
				set_temp_variable = { duration = 70 }
				
				EAI_dynamic_stability_score = yes
			}
		}
	}

	promises_of_peace = {# Conversion WS to ST.
		icon = generic_political_discourse

		available = {
			has_war = no
			has_war_support > 0.3
		}

		visible = {
			has_war = no
			has_war_support > 0.3
		}

		remove_trigger = {
			has_war = yes
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.01 #12.8%
			war_support_weekly = -0.01 #-12.8%
			political_power_gain = -0.10
		}

		days_remove = 90
		days_re_enable = 90

		cost = 50

		complete_effect = {
			set_temp_variable = { stability_weekly = 0.01 }
			set_temp_variable = { war_support_weekly = -0.01 }
				 
			set_temp_variable = { duration = 90 }
			EAI_stability_score_debug = yes

		}

		ai_will_do = {
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.01 }
				set_temp_variable = { war_support_weekly = -0.01 }
				 
				set_temp_variable = { duration = 90 }
				
				EAI_dynamic_stability_score = yes
			}
		}
	}
	
	more_civilian_goods = {# Conversion Cons Goods to ST.
		icon = generic_construction

		available = {
			
		}

		visible = {
			num_of_civilian_factories_available_for_projects > 10
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.01 #10%
			consumer_goods_factor = 0.04
		}

		days_remove = 70
		days_re_enable = 90

		cost = 50

		complete_effect = {
			set_temp_variable = { stability_weekly = 0.01 }
				 
			set_temp_variable = { duration = 70 } 
			set_temp_variable = { consumer_goods = 0.04 }
			EAI_stability_score_debug = yes

		}

		ai_will_do = {
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.01 }
				
				set_temp_variable = { duration = 70 }
				set_temp_variable = { consumer_goods = 0.04 }
				
				EAI_dynamic_stability_score = yes
				
			}
		}
	}
	focus_on_peoples_problems = {# Short time ST maintain
		icon = generic_political_discourse

		available = {
			has_war = no
			has_stability > 0.3
		}

		visible = {
			has_war = no
			has_stability > 0.3
		}

		remove_trigger = {
			has_war = yes
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.01 #10%
			political_power_gain = -0.1
		}

		days_remove = 70
		days_re_enable = 90

		cost = 50

		complete_effect = {
			set_temp_variable = { stability_weekly = 0.01 }
				 
			set_temp_variable = { duration = 70 }
			EAI_stability_score_debug = yes

		}

		ai_will_do = {
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.01 }
				
				set_temp_variable = { duration = 70 }
				
				EAI_dynamic_stability_score = yes
			}
			
		}
	}
	POL_go_allies_again = {
	
		icon = generic_industry

		allowed = {
			original_tag = POL
		}

		available = {
			has_war = yes
			surrender_progress > 0.7
			#num_of_controlled_states < 2
		}
		
		activation = {
			original_tag = POL
			#num_of_controlled_states < 2
			has_war_with = GER
			surrender_progress > 0.7
			ENG = { has_war_with = GER }
		}
		
		is_good = yes

		visible = {
			
		}
		
		days_remove = 1
		days_mission_timeout = 1
		
		complete_effect = {
			ENG = { add_to_faction = POL }
			POL = { remove_ideas = POL_never_surrender }
		}
	}
	AI_mobilization = {
		icon = generic_political_discourse
		allowed = {
			#is_ai = yes
		}
		available = {
			is_ai = yes
		}

		visible = {
			always = no
		}

		fire_only_once = no

		days_remove = 30

		cost = 0
		
		modifier = {
			mobilization_speed = 0.5
		}

		complete_effect = {
			add_manpower = 10000
		}

		ai_will_do = {
			base = 500
		}
	}
	
	AI_repair = {
		icon = generic_political_discourse
		allowed = {
			#is_ai = yes
		}

		visible = {
			is_ai = yes
			has_damaged_buildings = yes
			has_civil_war = no
		}

		fire_only_once = no

		days_remove = 90

		cost = 0
		
		modifier = {
			industry_free_repair_factor = 2
			industry_repair_factor = 2
		}

		complete_effect = {
			
		}

		ai_will_do = {
			base = 500
		}
	}
}

economy_decisions = {

	dismantle_maginot = {
		icon = generic_construction
		allowed = {
			player_only_trigger = yes
			NOT = { OR = { tag = GER tag = FRA } }
		}

		cost = 50
		fire_only_once = yes

		days_remove = 200

		available = {
			num_of_civilian_factories_available_for_projects > 10
			controls_state = 28
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				controls_state = 18
				controls_state = 29
			}
		}

		visible = {
			28 = { OWNER = { has_war_with = ROOT } }
			NOT = { is_in_faction_with = FRA }
		}

		modifier = {
			consumer_goods_factor = 0.05
		}

		complete_effect = {
			28 = {
				set_building_level = {
					type = bunker
					level = 2
					province = {
						all_provinces = yes
						level > 2
					}
				}
			}
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				18 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							level > 2
						}
					}
				}
				29 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							level > 2
						}
					}
				}
			}
		}
	}	
}

propaganda_efforts = {

	bravado_hold = {
		icon = generic_prepare_civil_war
		allowed = {
			player_only_trigger = yes
		}
		available = {
			NOT = { has_country_flag = war_propaganda_campaign_running }
			#has_offensive_war = no
		}
		visible = {
			surrender_progress > 0.0
		}
		ai_will_do = {
			base = 0
		}

		modifier = {
			#command_power_gain = -0.5
			army_org_factor = -0.05 
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -75 
				set_country_flag = no_loss_bravado
			}
		}
		custom_cost_trigger = {
			command_power > 74.9
		}
		custom_cost_text = cp_atleast_75
		
		days_remove = 90
		
		remove_effect = { 
			clr_country_flag = no_loss_bravado
		}
	}
	war_propaganda = {
		icon = generic_prepare_civil_war

		available = {
			NOT = { has_country_flag = war_propaganda_campaign_running }
			threat > 0.3
			has_offensive_war = no
		}

		visible = {
			threat > 0.3
			has_offensive_war = no
		}

		fire_only_once = no
		cost = 100
		
		days_remove = 90
		days_re_enable = 90

		modifier = {
			war_support_weekly = 0.01
			stability_weekly = 0.003
		}

		complete_effect = {
			set_country_flag = war_propaganda_campaign_running
		}
		
		remove_effect = {
			clr_country_flag = war_propaganda_campaign_running
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = 200
				has_war_support < 0.6
				has_war = yes
			}
			modifier = {
				add = 200
				has_stability < 0.5
			}
			modifier = {
				factor = 0.1
				has_war_support > 0.95
			}
		}
	}
	we_fight_united = {# +WS if in war and have high ST
		icon = generic_prepare_civil_war

		available = {
			NOT = { has_country_flag = we_fight_united }
			has_stability > 0.3
			has_war = yes
		}

		visible = {
			has_war = yes
			has_war_support < 1
		}

		fire_only_once = no
		cost = 100
		
		days_remove = 90
		days_re_enable = 100

		modifier = {
			war_support_weekly = 0.01
			political_power_factor = 0.15
			stability_weekly = 0.006
		}

		complete_effect = {
			set_country_flag = we_fight_united
			
			set_temp_variable = { war_support_weekly = 0.01 }
			set_temp_variable = { stability_weekly = 0.006 }
			
			set_temp_variable = { duration = 90 }
			EAI_war_support_score_debug = yes
		}
		remove_effect = {
			clr_country_flag = we_fight_united
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = war_support_score
				set_temp_variable = { war_support_weekly = 0.01 }
				set_temp_variable = { stability_weekly = 0.006 }
				
				set_temp_variable = { duration = 90 }
				EAI_dynamic_war_support_score = yes
			}
		}
	}
	preliminary_war_propaganda = {	# Preliminary war propaganda, while threat is small, no war
		icon = generic_prepare_civil_war

		available = {
			NOT = { has_country_flag = preliminary_war_propaganda }
			has_war = no
			has_war_support < 0.3
		}

		visible = {
			threat > 0.02
			threat < 0.3
			has_war = no
		}

		fire_only_once = no
		cost = 50
		
		days_remove = 135
		days_re_enable = 160

		modifier = {
			war_support_weekly = 0.005
			political_power_factor = -0.05
		}

		complete_effect = {
			set_country_flag = preliminary_war_propaganda
			
			set_temp_variable = { war_support_weekly = 0.005 }
			
			set_temp_variable = { duration = 135 }
			EAI_war_support_score_debug = yes
		}
		remove_effect = {
			clr_country_flag = preliminary_war_propaganda
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = war_support_score
				set_temp_variable = { war_support_weekly = 0.005 }
				
				set_temp_variable = { duration = 135 }
				EAI_dynamic_war_support_score = yes
			}
		}
	}
	#Justify our war, if offensive war and low WS
	justify_our_war = {
		icon = generic_prepare_civil_war

		available = {
			NOT = { has_country_flag = justify_our_war }
			has_war = yes
			has_offensive_war = yes
			has_war_support < 0.5
		}

		visible = {
			has_offensive_war = yes
			has_war_support < 0.5
		}

		fire_only_once = no
		cost = 150
		
		days_remove = 70
		days_re_enable = 90

		modifier = {
			war_support_weekly = 0.01
			political_power_factor = -0.15
			stability_weekly = -0.01
		}

		complete_effect = {
			set_country_flag = justify_our_war
			
			set_temp_variable = { war_support_weekly = 0.01 }
			set_temp_variable = { stability_weekly = -0.01 }
			
			set_temp_variable = { duration = 70 }
			EAI_war_support_score_debug = yes
		}
		
		remove_effect = {
			clr_country_flag = justify_our_war
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = war_support_score
				set_temp_variable = { war_support_weekly = 0.01 }
				set_temp_variable = { stability_weekly = -0.01 }
				
				set_temp_variable = { duration = 70 }
				EAI_dynamic_war_support_score = yes
			}
		}
	}	
		#Propaganda campaign against a country in offensive that has caused a lot of tension and started a war
	war_propaganda_against_warmonger = {
		icon = generic_prepare_civil_war
		
		available = {
			NOT = { has_country_flag = war_propaganda_campaign_running }
			FROM = {
				OR = {
					has_offensive_war = yes
					is_justifying_wargoal_against = ROOT
				}
			}
		}

		visible = {
			FROM = {
				NOT = { 
					is_neighbor_of = ROOT 
					has_government = ROOT
				}
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						has_offensive_war = yes
						has_added_tension_amount > 15
					}
					is_justifying_wargoal_against = ROOT
					has_offensive_war_with = ROOT
				}
			}
		}

		#target_trigger = {
		#	FROM = {
		#		NOT = { 
		#			is_neighbor_of = ROOT 
		#			has_government = ROOT
		#		}
		#		OR = {
		#			AND = {
		#				NOT = { has_government = ROOT }
		#				has_offensive_war = yes
		#				has_added_tension_amount > 15
		#			}
		#			is_justifying_wargoal_against = ROOT
		#			has_offensive_war_with = ROOT
		#		}
		#	}
		#}

		days_remove = 90

		fire_only_once = yes
		cost = 75

		modifier = {
			war_support_weekly = 0.008
		}

		complete_effect = {
			set_country_flag = war_propaganda_campaign_running
		}
		
		remove_effect = {
			clr_country_flag = war_propaganda_campaign_running
			
			set_temp_variable = { FROM_ws_amount = 0 }
			
			#Amount of damage done
			add_to_temp_variable = { FROM_ws_amount = From.num_occupied_states }
			
			#Tension created
			set_temp_variable = { tempvar = From.has_added_tension_amount }
			if = {
				limit = { 
					check_variable = { tempvar > 99 }
				}
				set_temp_variable = { tempvar = 100 }
			}
			add_to_temp_variable = { FROM_ws_amount = tempvar }
			
			#Size
			add_to_temp_variable = { FROM_ws_amount = From.num_controlled_states }
			
			divide_temp_variable = { FROM_ws_amount = 2000 }	
			
			custom_effect_tooltip = FROM_PROPAGANDA_AMOUNT
			add_war_support = FROM_ws_amount
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = 50
				has_war_support < 0.75
			}
			modifier = {
				add = 200
				has_war_support < 0.75
				NOT = {
					any_enemy_country = {
						check_variable { num_controlled_states > From.num_controlled_states }
					}
				}
			}
			modifier = {
				add = 200
				has_war_support < 0.75
				NOT = {
					any_enemy_country = {
						check_variable { has_added_tension_amount > From.has_added_tension_amount }
					}
				}
			}
			modifier = {
				add = 200
				has_war_support < 0.75
				NOT = {
					any_enemy_country = {
						check_variable { num_occupied_states > From.num_occupied_states }
					}
				}
			}
		}
	}
	
	#Propaganda campaign against a neighbor
	war_propaganda_against_warmonger_neighbor = {
		icon = generic_prepare_civil_war

		available = {
			NOT = { has_country_flag = war_propaganda_campaign_running }
			FROM = {
				OR = {
					has_offensive_war = yes 
					is_justifying_wargoal_against = ROOT
					has_war_with = ROOT
				}
			}
		}

		visible = {
			FROM = {
				NOT = { 
					tag = ROOT
					tag = OVERLORD
					has_government = ROOT 
					is_in_faction_with = ROOT
				} 
				is_neighbor_of = ROOT
				if = {
					limit = {
						is_puppet = yes 
					}
					compare_autonomy_state > autonomy_puppet
				}
				OR = {
					AND = {
						NOT = { has_government = ROOT }
						has_offensive_war = yes
					}
					is_justifying_wargoal_against = ROOT
					has_war_with = ROOT
				}
				has_added_tension_amount > 5
			}
		}

		#target_trigger = {
		#	FROM = {
		#		NOT = { is_in_faction_with = ROOT }
		#		is_neighbor_of = ROOT
		#		OR = {
		#			AND = {
		#				NOT = { has_government = ROOT }
		#				has_offensive_war = yes
		#			}
		#			is_justifying_wargoal_against = ROOT
		#			has_war_with = ROOT
		#		}
		#		has_added_tension_amount > 5
		#	}
		#}

		days_remove = 90
		days_re_enable = 180

		cost = 50

		modifier = {
			war_support_weekly = 0.008
		}

		complete_effect = {
			set_country_flag = war_propaganda_campaign_running
		}
		
		remove_effect = {
			clr_country_flag = war_propaganda_campaign_running
			
			set_temp_variable = { FROM_ws_amount = 0 }
			
			#Amount of damage done
			add_to_temp_variable = { FROM_ws_amount = From.num_occupied_states }
			
			#Tension created
			set_temp_variable = { tempvar = From.has_added_tension_amount }
			if = {
				limit = { 
					check_variable = { tempvar > 99 }
				}
				set_temp_variable = { tempvar = 100 }
			}
			add_to_temp_variable = { FROM_ws_amount = tempvar }
			
			#Size
			add_to_temp_variable = { FROM_ws_amount = From.num_core_states }
			
			divide_temp_variable = { FROM_ws_amount = 2000 }	
			
			custom_effect_tooltip = FROM_PROPAGANDA_AMOUNT
			add_war_support = FROM_ws_amount
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = 50
				has_war_support < 0.75
			}
			modifier = {
				add = 200
				has_war_support < 0.75
				NOT = {
					any_enemy_country = {
						check_variable { num_controlled_states > From.num_controlled_states }
					}
				}
			}
			modifier = {
				add = 200
				has_war_support < 0.75
				NOT = {
					any_enemy_country = {
						check_variable { has_added_tension_amount > From.has_added_tension_amount }
					}
				}
			}
			modifier = {
				add = 200
				has_war_support < 0.75
				NOT = {
					any_enemy_country = {
						check_variable { num_occupied_states > From.num_occupied_states }
					}
				}
			}
		}
	}
	
	#Clash of gods
	manifest_our_destiny  = {
		icon = generic_prepare_civil_war

		available = {
			NOT = { has_country_flag = manifest_our_destiny  }
			has_stability > 0.7
			has_war_support > 0.7
			has_war = yes
			is_major = yes
			any_enemy_country = { is_major = yes }
		}

		visible = {
			has_war_support > 0.7
			has_stability > 0.7
			has_war = yes
			is_major = yes
			any_enemy_country = { is_major = yes }
		}

		fire_only_once = no
		cost = 175
		
		days_remove = 90
		days_re_enable = 180 #Changed from THIRTY

		modifier = {
			army_core_attack_factor = 0.05
			army_core_defence_factor = 0.05
			war_support_weekly = 0.001
			stability_weekly = 0.001
		}

		complete_effect = {
			set_country_flag = manifest_our_destiny 
		}
		
		remove_effect = {
			clr_country_flag = manifest_our_destiny 
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = 40
				has_stability > 0.7
				has_war_support > 0.7
				has_war = yes
				is_major = yes
				any_enemy_country = { is_major = yes }
			}
		}
	}
	
	Military_Parade = {
		icon = GFX_decision_generic_tank
		
		available = {
			custom_trigger_tooltip = {
				tooltip = Military_Parade_tt 
				if = {
					limit = {
						is_ai = no 
					}
					var:original_capital = {
						ROOT = {
							divisions_in_state = {
								size > 0
								state = PREV
							}
						}
					}
				}
			
			}
			hidden_trigger = {
				command_power > 49.9		
			}
		}
		fixed_random_seed = no
		
		highlight_states = {
			state = var:Root.original_capital
		}
		
		fire_only_once = no
		cost = 0
		
		days_remove = 30
		days_re_enable = 50
		
		modifier = {
			civilian_factory_use = 3
			command_power_gain = -0.25
			opposition_party_drift = 0.01
		}
		
		visible = {
			if = {
				limit = {
					has_variable = original_capital
				}
				var:Root.original_capital = { is_controlled_by = ROOT }
			}
			else = {
				is_ai = yes 
			}
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -50 
			}
		}
		
		remove_effect = { 
			var:original_capital = {
				set_temp_variable = { Root.population = state_population_k }
				if = { 	
					limit = {
						state = 896
					}
					add_to_temp_variable = { Root.population = 841.state_population_k }
				}
				divide_temp_variable = { Root.population = 200 }
				
				set_temp_variable = { Root.state_value = state_strategic_value }
				if = { 	
					limit = {
						state = 896
					}
					add_to_temp_variable = { Root.state_value = 841.state_strategic_value }
				}
				multiply_temp_variable = { Root.state_value = 0.15 }
			}
			if = { limit = { check_variable = { population > 30 } } set_temp_variable = { population = 30 } }
			if = { limit = { check_variable = { population < 5 } } set_temp_variable = { population = 5 } }
			add_to_temp_variable = { pp_gain = population }
			if = { limit = { check_variable = { state_value > 30 } } set_temp_variable = { state_value = 30 } }
			if = { limit = { check_variable = { state_value < 5 } } set_temp_variable = { state_value = 5 } }
			add_to_temp_variable = { pp_gain = state_value }
			
			set_temp_variable = { war_score = any_war_score }
			multiply_temp_variable = { war_score = 0.15 }
			add_to_temp_variable = { pp_gain = war_score }
			if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 60 }
				}
				multiply_temp_variable = { pp_gain = 0.5 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 70 }
				}
				multiply_temp_variable = { pp_gain = 0.6 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 80 }
				}
				multiply_temp_variable = { pp_gain = 0.7 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 90 }
				}
				multiply_temp_variable = { pp_gain = 0.8 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 100 }
				}
				multiply_temp_variable = { pp_gain = 0.9 } 
			}
			custom_effect_tooltip = Military_Effect_tt
			add_political_power = pp_gain
			set_country_flag = Military_Parade
			hidden_effect = {
			### We might want the political swing to not impact these ideologies, my thought is authoritarian ideologies will tend to use military might to gain power, it also represents a small cost in taking the action			  
				random_list = {
					30 = {
						add_popularity = {
							ideology = fascism
							popularity = 0.02
						}
					}
					20 = { #communism and jingoism are NOT best buds and communists simply weren't excited by military might, unless they were in power
						if = {
							limit = { has_government = communism }
							add_popularity = {
								ideology = communism
								popularity = 0.02
							}
						}
						else = {
							add_popularity = {
								ideology = communism
								popularity = -0.02
							}								
						}							
					}
					20 = {
						add_popularity = {
							ideology = neutrality
							popularity = 0.02
						}
					}
					5 = {
						if = {
							limit = { NOT = { has_government = communism } }
							add_popularity = {
								ideology = monarchism
								popularity = 0.02
							}
						}
					}
					5 = {
						add_war_support = 0.01
					}
					5 = {
						add_war_support = 0.02
					}
					5 = {
						add_war_support = 0.03
					}
					5 = {
						add_war_support = 0.04
					}
					5 = {
						add_war_support = 0.05
					}
				}
			}
		}
		
		ai_will_do = {
			base = 25 		
			modifier = {
				factor = 0
				OR = {
					has_political_power > 500
					political_power_daily > 3
				}
			}
			modifier = {	## at this point its better to build instead of waste all the civ on parades
				factor = 0
				num_of_civilian_factories < 10
			}		
		}
		
		custom_cost_trigger = {
			command_power > 49.9
		}
		custom_cost_text = cp_atleast_50
	}
	
	Military_Parade_targeted = {
		icon = GFX_decision_generic_tank
		
		available = {
			custom_trigger_tooltip = {
				tooltip = Military_Parade_targeted_tt 
				var:Root.capital_@FROM = {
					ROOT = {
						divisions_in_state = {
							size > 0
							state = PREV
						}
					}
				}
			}
			hidden_trigger = {	
				command_power > 49.9	
			}
		}
		
		visible = {
			NOT = { tag = FROM }
		}
		
		fixed_random_seed = no

		fire_only_once = no
		cost = 0
		
		days_remove = 30
		days_re_enable = -1 #country specific
		
		modifier = {
			civilian_factory_use = 3
			command_power_gain = -0.25
			opposition_party_drift = 0.01
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -50 
			}
		}
		 
		highlight_states = {
			state = var:Root.capital_@FROM
		}
		
		remove_effect = { 
			set_country_flag = Military_Parade
			custom_effect_tooltip = Military_Effect_targeted_tt
			if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 60 }
				}
				multiply_temp_variable = { From.pp_gain = 0.5 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 70 }
				}
				multiply_temp_variable = { From.pp_gain = 0.6 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 80 }
				}
				multiply_temp_variable = { From.pp_gain = 0.7 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 90 }
				}
				multiply_temp_variable = { From.pp_gain = 0.8 } 
			}
			else_if = {
				limit = {
					has_country_flag = { flag = Military_Parade value = 1 days < 100 }
				}
				multiply_temp_variable = { From.pp_gain = 0.9 } 
			}
			add_political_power = From.pp_gain
			custom_effect_tooltip = Military_Effect_tt
			hidden_effect = {
### We might want the political swing to not impact these ideologies, my thought is authoritarian ideologies will tend to use military might to gain power, it also represents a small cost in taking the action			  
				random_list = {
					30 = {
						add_popularity = {
							ideology = fascism
							popularity = 0.02
						}
					}
					20 = { #communism and jingoism are NOT best buds and communists simply weren't excited by military might, unless they were in power
						if = {
							limit = { has_government = communism }
							add_popularity = {
								ideology = communism
								popularity = 0.02
							}
						}
						else = {
							add_popularity = {
								ideology = communism
								popularity = -0.02
							}								
						}							
					}
					20 = {
						add_popularity = {
							ideology = neutrality
							popularity = 0.02
						}
					}
					5 = {
						if = {
							limit = { NOT = { has_government = communism } }
							add_popularity = {
								ideology = monarchism
								popularity = 0.02
							}
						}
					}
					5 = {
						add_war_support = 0.01
					}
					5 = {
						add_war_support = 0.02
					}
					5 = {
						add_war_support = 0.03
					}
					5 = {
						add_war_support = 0.04
					}
					5 = {
						add_war_support = 0.05
					}
				}
			}
			FROM = { 
				set_country_flag = enemy_parade 
				clear_variable = pp_gain
			}
			clear_variable = capital_@FROM
		}
		
		ai_will_do = {
			base = 100 #high priority; can only be done once per target with high gains
			modifier = {
				factor = 3
				command_power > 50
			}
			modifier = {
				factor = 0.01 #pick the best ones
				any_enemy_country = {
					check_variable { pp_gain > From.pp_gain }
				}
			}			
		}
		
		custom_cost_trigger = {
			command_power > 49.9
		}
		custom_cost_text = cp_atleast_50
	}
}

operations = {

	HUN_slovak_war = {
		icon = generic_prepare_civil_war
		
		allowed = {
			always = no 
		}

		available = {
			SLO = {
				exists = yes 
				owns_state = 73 
				controls_state = 73
			}
		}

		visible = {
			
		}

		fire_only_once = yes

		days_remove = 1

		cost = 15
		
		complete_effect = {
			start_border_war = {
				change_state_after_war = yes
				attacker = {
					state = 664
					num_provinces = 1
					#on_win = japan_border_conflict.2
					#on_lose = japan_border_conflict.3
					#on_cancel = japan_border_conflict.4
				}
							
				defender = {
					state = 73
					num_provinces = 2
					#on_win = japan_border_conflict.3
					#on_lose = japan_border_conflict.2
					#on_cancel = japan_border_conflict.4
				}
			}
		}

		ai_will_do = {
			base = 500
		}
	}
	blow_suez_canal = {
		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			has_dlc = "Waking the Tiger"
		}

		available = {
			853 = { 
				is_controlled_by_ROOT_or_ally = yes 
				if = { limit = { ROOT = { is_ai = no } } has_ROOT_at_least_1_div_in_current_state_scope = yes }
			}
			hidden_trigger = { 
				command_power > 49.9
			}
		}
	
		visible = {
			has_war = yes
			NOT = { has_global_flag = SUEZ_CANAL_BLOCKED }
			OR = {
				owns_state = 853
				controls_state = 853
				853 = { OWNER = { has_war_with = ROOT } }
			}
		}
	
		fire_only_once = no
		#cost = 75
		
		custom_cost_trigger = {
			command_power > 49.9
		}
		custom_cost_text = cp_atleast_50
		
		days_remove = 30
	
		modifier = {
			civilian_factory_use = 5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -50
				if = {
					limit = {
						NOT = {
							owns_state = 853
						}
					}
					random_other_country = {
						limit = {
							owns_state = 853
						}
						country_event = { id = generic.12 days = 1 }
					}
				}
			}
		}
	
		remove_effect = {
			if = {
				limit = {
					853 = { 
						is_fully_controlled_by = ROOT 
					}
				}
				set_country_flag = blew_up_suez
				set_global_flag = SUEZ_CANAL_BLOCKED
				country_event = { id = wtt_news.40 hours = 6}
			}
			if = {
				limit = {
					853 = { 
						is_controlled_by_ROOT_or_ally = yes 
						NOT = { is_controlled_by = ROOT }
					}
				}
				random_country = {
					limit = {
						controls_state = 853
					}
					country_event = generic.42
				}
			}
					
			add_war_support = -0.05
			add_stability = -0.05
		}
		
		cancel_trigger = {
			if = {
				limit = {
					853 = { 
						is_controlled_by_ROOT_or_ally = yes 
						NOT = { is_controlled_by = ROOT }
					}
				}
				has_global_flag = no_suez_destruction
			}
		}
		
		ai_will_do = {
			factor = 0
			modifier = {
				add = 2000
				owns_state = 853
				452 = {
					CONTROLLER = {
						has_war_with = ROOT 
					}
				}
				any_enemy_country = {
					OR = {
						divisions_in_state = {
							state = 446 
							size > 0 
						}
						divisions_in_state = {
							state = 447 
							size > 1
						}
						controls_state = 447
					}
				}
			}
			modifier = {
				factor = 0 
				NOT = { controls_state = 853 }
			}
		}
	}

	blow_panama_canal = {
		icon = GFX_decision_generic_ignite_civil_war
		allowed = {
			has_dlc = "Waking the Tiger"
			
		}
		available = {
			685 = { 
				is_fully_controlled_by = ROOT 
				has_ROOT_at_least_1_div_in_current_state_scope = yes 
			}
		}
	
		visible = {
			has_war = yes
			NOT = { has_global_flag = PANAMA_CANAL_BLOCKED }
			685 = { OWNER = { has_war_with = ROOT } }
		}
	
		fire_only_once = no
		cost = 75
		
		days_remove = 30
	
		modifier = {
			civilian_factory_use = 5
		}

		complete_effect = {
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							owns_state = 685
						}
					}
					random_country = {
						limit = {
							owns_state = 685
						}
						country_event = { id = generic.13 days = 1 }
					}
				}
			}
		}
	
		remove_effect = {
			if = {
				limit = {
					has_full_control_of_state = 685
				}
				set_country_flag = blew_up_panama
				set_global_flag = PANAMA_CANAL_BLOCKED
				country_event = { id = wtt_news.41 hours = 6}
			}
			effect_tooltip = {
				if = {
					limit = {
						USA = { owns_state = 685 }
					}
					add_war_support = -0.05
					add_stability = -0.05
				}
			}
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	War_games_navy = {
		icon = GFX_decision_generic_naval
		fixed_random_seed = no
		available = {
			hidden_trigger = { command_power > 74.9 }
			has_war = no
			has_navy_size = { size > 0 }
		}
		allowed = {
			player_only_trigger = yes
		}
		visible = {
			has_war = no
			has_country_flag = coastal_state
		}

		remove_trigger = {
			has_war = yes
		}

		fire_only_once = no
		#cost = 25
		
		days_remove = 70
		days_re_enable = 50
		
		modifier = {
			experience_gain_navy = 0.14
			command_power_gain = -0.5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -75 
			}
		}
		
		remove_effect = { 
			navy_experience = 5
			random_navy_leader = {
				limit = {
					not = { has_trait = Master_theoretician }
				}
				if = {
					limit = {
						is_assigned = yes
					}
					add_unit_leader_trait = Master_theoretician
				}
				else = {
					add_unit_leader_trait = Master_theoretician
				}
			}
		}
		custom_cost_trigger = {
			command_power > 74.9
		}
		custom_cost_text = cp_atleast_75
	}
	War_games_Airforce = {
		icon = GFX_decision_generic_air
		fixed_random_seed = no
		available = {
			hidden_trigger = { command_power > 49.9 }
			has_war = no
			has_deployed_air_force_size = { size > 0 }
		}
		allowed = {
			player_only_trigger = yes
		}
		visible = {
			has_war = no
		}

		remove_trigger = {
			has_war = yes
		}

		fire_only_once = no
		#cost = 25
		
		days_remove = 70
		days_re_enable = 50
		
		modifier = {
			experience_gain_air = 0.14
			command_power_gain = -0.5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -50 
			}
		}
		
		remove_effect = { 
			air_experience = 5
			custom_effect_tooltip = War_games_Airforce_tt
			hidden_effect = {
				random_list = {
					10 = {
						add_ace = {
							name = Wing
							surname = "Alpha"
							callsign = Leader
							type = gamer_ace
							is_female = no
						}
					}
					10 = {
						add_ace = {
							name = Wing
							surname = "Beta"
							callsign = Leader
							type = gamer_ace
							is_female = no
						}
					}
					10 = {
						add_ace = {
							name = Wing
							surname = "Delta"
							callsign = Leader
							type = gamer_ace
							is_female = no
						}
					}
					10 = {
						add_ace = {
							name = Wing
							surname = "Gamma"
							callsign = Leader
							type = gamer_ace
							is_female = no
						}
					}
					10 = {
						add_ace = {
							name = Wing
							surname = "Theta"
							callsign = Leader
							type = gamer_ace
							is_female = no
						}
					}
					## no ace for you
					50 = { } 
				}
			}
		}
		custom_cost_trigger = {
			command_power > 49.9
		}
		custom_cost_text = cp_atleast_50
	}
	War_games_Army = {
		icon = GFX_decision_generic_tank
		allowed = {
			player_only_trigger = yes
		}
		available = {
			hidden_trigger = { command_power > 99.9 }
			has_war = no
			num_divisions > 0
		}
		fixed_random_seed = no
		visible = {
			has_war = no
			#check_variable = { low_unit_leader > 0 }
			#any_unit_leader = {
			#	OR = {
			#		has_trait = Bad_General
			#		has_trait = Terrible_General
			#		has_trait = Incompetent_General
			#		has_trait = Mindless_General
			#	}
			#}
		}

		remove_trigger = {
			has_war = yes
		}

		fire_only_once = no
		#cost = 25
		
		days_remove = 70
		days_re_enable = 50
		
		modifier = {
			experience_gain_army = 0.14
			command_power_gain = -0.5
		}

		complete_effect = {
			hidden_effect = {
				add_command_power = -100 
			}
		}
		
		remove_effect = { 
			army_experience = 5
			random_army_leader = {
				limit = {
					if = {
						limit = {
							ROOT = {
								any_unit_leader = {
									is_assigned = yes
									OR = {
										has_trait = Bad_General
										has_trait = Terrible_General
										has_trait = Incompetent_General
										has_trait = Mindless_General
									}
								}
							}
						}
						is_assigned = yes
						OR = {
							has_trait = Bad_General
							has_trait = Terrible_General
							has_trait = Incompetent_General
							has_trait = Mindless_General
						}
						
						NOT = {
							ROOT = {
								any_unit_leader = {
									is_assigned = yes
									OR = {
										has_trait = Bad_General
										has_trait = Terrible_General
										has_trait = Incompetent_General
										has_trait = Mindless_General
									}
									check_variable = { skill > Prev.Prev.skill }
								}
							}
						}
										
						
						#if = { limit = { ROOT = { any_unit_leader = { has_trait = Bad_General is_assigned = yes } } }
						#	has_trait = Bad_General
						#}
						#else_if = { limit = { ROOT = { any_unit_leader = { has_trait = Terrible_General is_assigned = yes } } }
						#	has_trait = Terrible_General
						#}
						#else_if = { limit = { ROOT = { any_unit_leader = { has_trait = Incompetent_General is_assigned = yes } } }
						#	has_trait = Incompetent_General
						#}
						#else_if = { limit = { ROOT = { any_unit_leader = { has_trait = Mindless_General is_assigned = yes } } }
						#	has_trait = Mindless_General
						#}
					}
					else_if = {
						limit = {
							ROOT = {
								any_unit_leader = {
									is_assigned = no
									OR = {
										has_trait = Bad_General
										has_trait = Terrible_General
										has_trait = Incompetent_General
										has_trait = Mindless_General
									}
								}
							}
						}
						is_assigned = no
						OR = {
							has_trait = Bad_General
							has_trait = Terrible_General
							has_trait = Incompetent_General
							has_trait = Mindless_General
						}
						
						NOT = {
							ROOT = {
								any_unit_leader = {
									is_assigned = no
									OR = {
										has_trait = Bad_General
										has_trait = Terrible_General
										has_trait = Incompetent_General
										has_trait = Mindless_General
									}
									check_variable = { skill > Prev.Prev.skill }
								}
							}
						}
					}	
				}
				if = {			
					limit = {
						is_assigned = yes
						OR = {
							has_trait = Bad_General
							has_trait = Terrible_General
							has_trait = Incompetent_General
							has_trait = Mindless_General
						}
					}					
					if = {
						limit = {
							has_trait = Bad_General
						}
						remove_unit_leader_trait = Bad_General
						add_unit_leader_trait = Decent_General
					}
					else_if = {
						limit = {
							has_trait = Terrible_General
						}
						remove_unit_leader_trait = Terrible_General
						add_unit_leader_trait = Bad_General
					}
					else_if = {
						limit = {
							has_trait = Incompetent_General
						}
						remove_unit_leader_trait = Incompetent_General
						add_unit_leader_trait = Terrible_General
					}					
					else_if = {
						limit = {
							has_trait = Mindless_General
						}
						remove_unit_leader_trait = Mindless_General
						add_unit_leader_trait = Incompetent_General
					}	
				}
				else_if = {
					limit = {
						OR = {
							has_trait = Bad_General
							has_trait = Terrible_General
							has_trait = Incompetent_General
							has_trait = Mindless_General
						}
					}				
					if = {
						limit = {
							has_trait = Bad_General
						}
						remove_unit_leader_trait = Bad_General
						add_unit_leader_trait = Decent_General
					}
					else_if = {
						limit = {
							has_trait = Terrible_General
						}
						remove_unit_leader_trait = Terrible_General
						add_unit_leader_trait = Bad_General
					}
					else_if = {
						limit = {
							has_trait = Incompetent_General
						}
						remove_unit_leader_trait = Incompetent_General
						add_unit_leader_trait = Terrible_General
					}				
					else_if = {
						limit = {
							has_trait = Mindless_General
						}
						remove_unit_leader_trait = Mindless_General
						add_unit_leader_trait = Incompetent_General
					}		
				}
			}
		}
		custom_cost_trigger = {
			command_power > 99.9
		}
		custom_cost_text = cp_atleast_100
	}
	train_command = {
		icon = generic_prepare_civil_war
		ai_will_do = {
			factor = 1
		}
		available = {
			hidden_trigger = {  
				has_army_experience > 49.9 
				OR = {
					has_air_experience > 14.9
					has_navy_experience > 14.9
				}
			}			
		}

		visible = {
			not = { 
				has_idea = CHI_incompetent_officers 
				has_idea = cmd_increase10
			}
		}

		remove_trigger = {
		}

		fire_only_once = no		
		
		days_remove = 25
		days_re_enable = 100
		
		modifier = {
			training_time_army_factor = 0.25
			planning_speed = -0.10
			military_leader_cost_factor = 0.50 
		}

		complete_effect = {
			if = {
				limit = { has_air_experience > 14.9 }
				hidden_effect = {
					army_experience = -50
					air_experience = -15
				}
			}
			else = {
				hidden_effect = {
					army_experience = -50
					navy_experience = -15
				}
			}
		}
		remove_effect = {
			if = {
				limit = { has_idea = cmd_increase9 }
				swap_ideas = {
					add_idea = cmd_increase10
					remove_idea = cmd_increase9
				}
			}
			else_if = {
				limit = { has_idea = cmd_increase8 }
				swap_ideas = {
					add_idea = cmd_increase9
					remove_idea = cmd_increase8
				}
			}
			else_if = {
				limit = { has_idea = cmd_increase7 }
				swap_ideas = {
					add_idea = cmd_increase8
					remove_idea = cmd_increase7
				}
			}
			else_if = {
				limit = { has_idea = cmd_increase6 }
				swap_ideas = {
					add_idea = cmd_increase7
					remove_idea = cmd_increase6
				}
			}
			else_if = {
				limit = { has_idea = cmd_increase5 }
				swap_ideas = {
					add_idea = cmd_increase6
					remove_idea = cmd_increase5
				}
			}		
			else_if = {
				limit = { has_idea = cmd_increase4 }
				swap_ideas = {
					add_idea = cmd_increase5
					remove_idea = cmd_increase4
				}
			}
			else_if = {
				limit = { has_idea = cmd_increase3 }
				swap_ideas = {
					add_idea = cmd_increase4
					remove_idea = cmd_increase3
				}				
			}	
			else_if = {
				limit = { has_idea = cmd_increase2 }
				swap_ideas = {
					add_idea = cmd_increase3
					remove_idea = cmd_increase2
				}				
			}
			else_if = {
				limit = { has_idea = cmd_increase1 }
				swap_ideas = {
					add_idea = cmd_increase2
					remove_idea = cmd_increase1
				}				
			}
			else_if = {
				limit = { has_idea = cmd_increase }
				swap_ideas = {
					add_idea = cmd_increase1
					remove_idea = cmd_increase
				}				
			}
			else = {
				add_ideas = cmd_increase
			}
		}
		
		ai_will_do = {
			factor = 40
		}
		
		custom_cost_trigger = {
			has_army_experience > 49.9 
			OR = {
				has_air_experience > 14.9
				has_navy_experience > 14.9
			}
		}
		custom_cost_text = army_navy_air_xp
	}
	
}

special_projects = {

	rebuild_suez_canal = {
		icon = GFX_decision_generic_special_project

		available = {
			has_full_control_of_state = 853
			num_of_civilian_factories > 10
		}
	
		visible = {
			has_global_flag = SUEZ_CANAL_BLOCKED
			853 = {
				OR = {
					is_controlled_by_ROOT_or_ally = yes 
					OWNER = { has_war_with = ROOT }
				}
			}
		}
	
		fire_only_once = no
		cost = 250
		
		days_remove = 365

		modifier = {
			civilian_factory_use = 10
		}
	
		remove_effect = {
			if = {
				limit = {
					has_full_control_of_state = 853
				}
				set_country_flag = rebuilt_suez
				clr_global_flag = SUEZ_CANAL_BLOCKED
				country_event = { id = wtt_news.42 hours = 6}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_navy_size = { size < 100 }
			}
			modifier = {
				factor = 200
				NOT = {
					OR = {
						has_full_control_of_state = 118
						any_other_country = {
							is_in_faction_with = ROOT
							has_full_control_of_state = 118
						}
					}
				}
				OR = {
					ITA = { surrender_progress < 0.1 }
					NOT = { tag = ENG }
				}
				has_full_control_of_state = 447
				has_full_control_of_state = 454
				has_full_control_of_state = 452
				has_full_control_of_state = 456
				has_full_control_of_state = 457
				NOT = { has_country_flag = blew_up_suez }
			}
		}
	}

	rebuild_panama_canal = {
		icon = GFX_decision_generic_special_project

		available = {
			has_full_control_of_state = 685
			304 = { CONTROLLER = { NOT = { has_war_with = ROOT } } }
			num_of_civilian_factories > 80
		}
	
		visible = {
			has_global_flag = PANAMA_CANAL_BLOCKED
		}
	
		fire_only_once = no
		cost = 400
		
		days_remove = 550

		modifier = {
			civilian_factory_use = 80
		}
	
		remove_effect = {
			if = {
				limit = {
					has_full_control_of_state = 685
					304 = { CONTROLLER = { NOT = { has_war_with = ROOT } } }
				}
				set_country_flag = rebuilt_panama
				clr_global_flag = PANAMA_CANAL_BLOCKED
				country_event = { id = wtt_news.43 hours = 6}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_navy_size = { size < 100 }
			}
			modifier = {
				factor = 0
				has_country_flag = blew_up_panama
			}
		}
	}
}

war_measures = {
	unite_people_under_goverment = {	# Short time high ST gain if ST > 0.3, short, high cost
		icon = generic_prepare_civil_war

		available = {
			NOT = { has_country_flag = war_propaganda_campaign_running }
			has_stability > 0.3
			has_war = yes
		}

		visible = {
			has_stability > 0.3
			has_war = yes
			has_civil_war = no
		}

		fire_only_once = no
		cost = 30
		
		days_remove = 45
		days_re_enable = 270

		modifier = {
			war_support_weekly = 0.02 #12.8%
			stability_weekly = 0.02 #12.8%
			political_power_factor = 0.1
		}

		complete_effect = {
			set_country_flag = unite_people_under_goverment
			
				set_temp_variable = { stability_weekly = 0.02 }
				set_temp_variable = { war_support_weekly = 0.02 }
				
				set_temp_variable = { duration = 45 }
				
				EAI_stability_score_debug = yes
		}
		
		remove_effect = {
			clr_country_flag = unite_people_under_goverment
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.02 }
				set_temp_variable = { war_support_weekly = 0.02 }
				
				set_temp_variable = { duration = 45 }
				
				EAI_dynamic_stability_score = yes
				
				multiply_temp_variable = { stability_score = 2.0 }
			}
		}
	}

	requisition_trucks = {
		#icon = generic_industry
		allowed = {
			#is_ai = no
		}
		available = {
			has_war = yes
		}

		visible = {
			OR = {
				has_idea = war_economy
				has_war = yes
			}
		}

		fire_only_once = no

		days_re_enable = 180
		cost = 50
		
		days_remove = 90
		
		modifier = {
            industrial_capacity_factory = -0.04
			political_power_factor = -0.05
			opposition_party_drift = 0.02
        }

		complete_effect = {
			add_war_support = -0.03
		}
		
		remove_effect = {
			set_temp_variable = { requisition_trucks_temp = requisition_trucks }
			if = {
				limit = {
					NOT = { has_variable = requisition_trucks }
				}
				
				set_variable = { requisition_trucks = 1000 }
				set_temp_variable = { requisition_trucks_temp = 1000 }
			}
			add_equipment_to_stockpile = {
				type = civilian_motorized_equipment
				amount = requisition_trucks_temp
				producer = CIV
			}
			subtract_from_variable = { requisition_trucks = 200 }
			if = {
				limit = {
					check_variable = { requisition_trucks = 0 }
				}
				clear_variable = requisition_trucks
				set_country_flag = requisition_cars_done
			}
        } 
		
		ai_will_do = {
			factor = 0
		}
	}
	
	requisition_cars = {
		#icon = generic_industry

		available = {
			has_war = yes
		}
		allowed = {
			#is_ai = no
		}
		visible = {
			OR = {
				has_idea = war_economy
				has_war = yes
			}
			NOT = { has_country_flag = requisition_cars_done }
		}

		fire_only_once = no
		cost = 50
		
		days_re_enable = 180
		days_remove = 90
		
		modifier = {
            industrial_capacity_factory = -0.04
			political_power_factor = -0.05
			opposition_party_drift = 0.02
        }

		complete_effect = {
			add_war_support = -0.025
		}
		
		remove_effect = {
			set_temp_variable = { requisition_cars_temp = requisition_cars }
			if = {
				limit = {
					NOT = { has_variable = requisition_cars }
				}
				
				set_variable = { requisition_cars = 1400 }
				set_temp_variable = { requisition_cars_temp = 1400 }
			}
			add_equipment_to_stockpile = {
				type = civilian_motorized_lia_equipment
				amount = requisition_cars_temp
				producer = CIV
			}
			subtract_from_variable = { requisition_cars = 200 }
			if = {
				limit = {
					check_variable = { requisition_cars = 0 }
				}
				clear_variable = requisition_cars
				set_country_flag = requisition_cars_done
			}
         }
		
		ai_will_do = {
			factor = 0
		}
	}
	
	requisition_motorcycles = {
		#icon = generic_industry

		available = {
			has_war = yes
		}
		allowed = {
			#is_ai = no
		}
		visible = {
			OR = {
				has_idea = war_economy
				has_war = yes
			}
			NOT = { has_country_flag = requisition_motorcycles_done }
		}

		fire_only_once = no
		cost = 50
		
		days_re_enable = 180
		days_remove = 90
		
		modifier = {
            industrial_capacity_factory = -0.04
			political_power_factor = -0.05
			opposition_party_drift = 0.01
        }

		complete_effect = {
			add_war_support = -0.03
		}
		
		remove_effect = {
			set_temp_variable = { requisition_motorcycles_temp = requisition_motorcycles }
			if = {
				limit = {
					NOT = { has_variable = requisition_motorcycles }
				}
				
				set_variable = { requisition_motorcycles = 1000 }
				set_temp_variable = { requisition_motorcycles_temp = 1000 }
			}
			add_equipment_to_stockpile = {
				type = civilian_recon_mot_equipment
				amount = requisition_motorcycles_temp
				producer = CIV
			}
			subtract_from_variable = { requisition_motorcycles = 200 }
			if = {
				limit = {
					check_variable = { requisition_motorcycles = 0 }
				}
				clear_variable = requisition_motorcycles
				set_country_flag = requisition_motorcycles_done
			}
        }
		
		ai_will_do = {
			factor = 0	
		}
	}
	
	ration_civilian_petrol = {
		icon = oil
		available = {
			has_war = yes
		}
		allowed = {
			always = no #has no use tbh
		}
		visible = {
			OR = {
				has_idea = war_economy
				has_war = yes
			}
			not = { has_country_flag = petrol_rationed }
		}

		fire_only_once = no
		cost = 75
		

		days_remove = 365
		
		modifier = {
            local_resources_factor = 0.03
			stability_weekly = -0.002
			war_support_weekly = -0.002
			political_power_factor = -0.1
			opposition_party_drift = 0.15
        }

		complete_effect = {
			add_war_support = -0.07
			set_country_flag = rationed_petrol
		}
		
		remove_effect = {
			set_country_flag = petrol_rationed
        }
		
		ai_will_do = {
			base = 0
			modifier = {
				is_major = yes
				add = 300 
				
				
			}
		}
	}
	
	collect_metals = {
		icon = tungsten
		fixed_random_seed = no
		available = {
			has_war = yes
		}

		visible = {
			OR = {
				has_idea = war_economy
				has_war = yes
			}
			not = { has_country_flag = metals_collected }
		}

		fire_only_once = no
		cost = 50
		
		days_re_enable = -1 #blaze it
		days_remove = 180
		
		modifier = {
            local_resources_factor = 0.03
			industrial_capacity_factory = -0.05
        }

		complete_effect = {
			#add_war_support = -0.05
		}
		
		remove_effect = {
			set_country_flag = metals_collected
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT }
				add_resource = {
					type = steel
					amount = 18
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT }
				add_resource = {
					type = tungsten
					amount = 2
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT }
				add_resource = {
					type = tungsten
					amount = 3
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT }
				add_resource = {
					type = chromium
					amount = 4
				}
			}
			random_owned_controlled_state = {
				limit = { is_core_of = ROOT }
				add_resource = {
					type = chromium
					amount = 3
				}
			}
        }
		
		ai_will_do = {
			base = 70
			modifier = {
				add = -70 #use as pp dump#
				has_political_power < 80
				is_major = no
				
			}
		}
	}
	
	round_up_horses = {
		icon = generic_industry

		available = {
			has_war = yes
		}
		allowed = {
			#is_ai = no
		}
		visible = {
			OR = {
				has_idea = war_economy
				has_war = yes
			}
		}

		fire_only_once = no
		cost = 50
		
		days_re_enable = 180 #blaze it
		days_remove = 90
		
		modifier = {
			industrial_capacity_factory = -0.04
			opposition_party_drift = 0.01
        }

		complete_effect = {
			add_war_support = -0.02
		}
		
		remove_effect = {
			set_temp_variable = { round_up_horses_temp = round_up_horses }
			if = {
				limit = {
					NOT = { has_variable = round_up_horses }
				}
				
				set_variable = { round_up_horses = 2000 }
				set_temp_variable = { round_up_horses_temp = 2000 }
			}
			add_equipment_to_stockpile = {
				type = horse_equipment_0
				amount = round_up_horses_temp
			}
			subtract_from_variable = { round_up_horses = 400 }
			if = {
				limit = {
					check_variable = { round_up_horses = 0 }
				}
				clear_variable = round_up_horses
				set_country_flag = requisition_motorcycles_done
			}
        }
		
		ai_will_do = {
			factor = 0
		}
	}	
	emergency_factory_conversion_defensive = {

		icon = generic_industry
		allowed = {
			player_only_trigger = yes
		}
		available = {
			num_of_civilian_factories > 5 #Change this if amount of factories change
		}

		visible = {
			has_defensive_war = yes
			has_offensive_war = no			
		}

		fire_only_once = no

		days_re_enable = 90

		cost = 100

		complete_effect = {
			replace_civ_with_arms_factories = yes
			add_war_support = -0.03
		}
		ai_will_do = {
			factor = 0
		}
	}

	emergency_factory_conversion_offensive = {

		icon = generic_industry
		allowed = {
			#is_ai = no
		}
		available = {
			num_of_civilian_factories > 5 #Change this if amount of factories change
		}

		visible = {
			has_offensive_war = yes
		}

		fire_only_once = no

		days_re_enable = 90

		cost = 100

		complete_effect = {
			replace_civ_with_arms_factories = yes
			add_war_support = -0.04
			add_stability = -0.025
		}
		ai_will_do = {
			factor = 0
		}
	}

	desperate_defense = {

		icon = generic_prepare_civil_war

		available = {
			surrender_progress > 0.5
		}

		visible = {
			surrender_progress > 0
		}

		fire_only_once = no

		days_remove = 45
		days_re_enable = 360

		cost = 50
		
		ai_will_do = {
			base = 0
			modifier = {
				add = 20 
				surrender_progress > 0.55				
			}
		}

		modifier = {
			defence = 0.2
			dig_in_speed_factor = 0.5
		}

		complete_effect = {

		}
	}

	women_in_the_workforce = {
		icon = generic_industry

        allowed = {
            always = yes
        }

        available = {
            has_war = yes
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}
            OR = {
            	has_idea = labor_none 
            	has_idea = labor_allowed
            }
            OR = {
                AND = {
                    democratic_govt = yes
                    has_war_support > 0.79
                }
                AND = {
                    has_government = communism
                    has_war_support > 0.79
                }
                AND = {
                    has_government = fascism
                    OR = {
                        has_war_support > 0.89
                        surrender_progress > 0
                    }
                }
                AND = {
                    has_government = neutrality
                    has_war_support > 0.84
                    has_stability > 0.7
                }
            }
        }
		
        visible = {
            has_war = yes
            OR = {
            	has_idea = labor_none 
            	has_idea = labor_allowed
            }
        }
		
        cost = 50
		
        days_remove = -1
        
		complete_effect = {
			if = {
				limit = {
					tag = CAN
				}
				country_event = { id = canada_vanilla.1 hours = 6 } # Ronnie the Bren Gun Girl
			}
			add_ideas = labor_encouraged
        }
		
		remove_trigger = {
            has_war = no
        }
		
		ai_will_do = {
			factor = 40
		}
	}

    war_bonds = {
    	icon = generic_industry

    	allowed = {
            always = yes
        }

        available = {
            has_war = yes
			
			OR = {
				has_idea = bonds_peace
				has_idea = bonds_basic
				has_idea = bonds_war_domestic
				has_idea = bonds_war_international
			}
			
			if = {
				limit = {
					democratic_govt = yes
				}
				has_war_support > 0.79
			}
			if = {
				limit = {
					has_government = communism
				}
				has_war_support > 0.79
			}
			if = {
				limit = {
					has_government = fascism
				}
				OR = {
					has_war_support > 0.89
					surrender_progress > 0
                }
			}
			if = {
				limit = {
					has_government = neutrality
				}
				has_war_support > 0.84
                has_stability > 0.7
			}
        }
		
        visible = {
            has_war = yes
			
			OR = {
				has_idea = bonds_peace
				has_idea = bonds_basic
				has_idea = bonds_war_domestic
				has_idea = bonds_war_international
			}
        }

        fire_only_once = no
		cost = 75
		
		days_remove = 90
		
		days_re_enable = 360

		modifier = {
			consumer_goods_factor = -0.03
		}

		remove_effect = {
		}

		complete_effect = {
			if = {
				limit = {
					OR = {
						has_idea = bonds_peace
						has_idea = bonds_basic
						has_idea = bonds_war_domestic
						has_idea = bonds_war_international
					}
				}
				add_ideas = bonds_war_public
			}
		}
		
		ai_will_do = {
			base = 72
			modifier = {
				add = -72 #use as pp dump#
				has_political_power < 85
				
			}
			modifier = {
				add = 20
				check_variable = { num_of_available_civilian_factories < 1 }
			}
		}
	}
    
}

foreign_politics = {
	object_to_attaches = {

		allowed = {
            always = yes
        }
        
        fire_only_once = no
		cost = 50
		
        days_re_enable = 30

        available = {
        }

        visible = {
        	has_war = yes
        	has_capitulated = no
        	NOT = { has_war_with = FROM }
			FROM = {
        		NOT = { has_country_flag = rejected_withdrawing_attache }
        		NOT = { has_country_flag = rejected_withdrawing_attache@ROOT }
        		NOT = { has_country_flag = object_attache_going_on }
        	}
        	any_enemy_country = {
				has_attache_from = FROM
			}
		}

		#target_trigger = {
		#	NOT = { has_war_with = FROM }
		#	#FROM = { has_sent_attache = yes } # Make such trigger to optimize if it becomes a performance problem again.
		#	any_enemy_country = {
		#		has_attache_from = FROM
		#	}				
		#}

        complete_effect = {
			FROM = { country_event = { id = generic.14 hours = 6 } }
			hidden_effect = {
				FROM = { set_country_flag = object_attache_going_on }
			}
		}
		
		ai_will_do = {
			factor = 50
		}
	}
	#From is licensing to ROOT
	seek_closer_bonds_to_license_owner = {

		allowed = {
            always = no
        }
        
        fire_only_once = no
		cost = 50
		
		days_remove = 100 
		
        days_re_enable = 180

        available = {
			FROM = {
				is_licensing_any_to = ROOT
				has_opinion = {
					target = ROOT
					value > 19.9
				}
			}
        }

        visible = {
        	FROM = {
				is_licensing_any_to = ROOT
				NOT = { has_country_flag = closer_license_@ROOT }
        	}
		}

		#target_trigger = {
		#	FROM = {
		#		is_licensing_any_to = ROOT
		#		NOT = { has_country_flag = closer_license_@ROOT }
        #	}			
		#}

        complete_effect = {
			FROM = {
				country_event = { id = licenses.4 days = 1 }
				custom_effect_tooltip = needs_approval
				effect_tooltip = {
					add_opinion_modifier = {
						target = FROM
						modifier = license_cooperation
					}
					add_relation_modifier = {
						target = FROM
						modifier = close_cooperation
					}
				}
				set_country_flag = closer_license_@ROOT
			}
		}
		
		remove_effect = {
			remove_relation_modifier = {
				target = FROM
				modifier = close_cooperation
			}
			FROM = { clr_country_flag = closer_license_@ROOT }
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

economy_decisions = {
	army_construction = {# Use the Army to help build as a minor
		icon = generic_construction


		visible = {
			num_of_civilian_factories < 21
			has_war = no
		}

		fire_only_once = no
        available = {
			command_power > 24.9
			num_divisions > 0
			threat < 0.99
        }
		
		custom_cost_trigger = {
			command_power > 24.9
		}
		custom_cost_text = cp_atleast_25
		
		remove_trigger = {
			has_war = yes
		}		
		modifier = {
			mobilization_speed = -0.75
			production_speed_buildings_factor = 0.1
		}

		days_remove = 100
		days_re_enable = 100

		complete_effect = {
			hidden_effect = {
				add_command_power = -25
			}
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				is_subject = yes
			}
			modifier = {
				add = 5
				is_subject = yes
				OVERLORD = { is_ai = no }
			}
		}
	}
	return_land = {# loose building slots for stab
		icon = consumer_goods

		available = {
			has_stability < 0.45	
			any_owned_state = {
				free_building_slots = {
					building = dummy_1
					size > 1
				}
			}
		}

		visible = {
			num_of_civilian_factories_available_for_projects > 0
			has_stability < 0.5
			has_civil_war = no
			has_dlc = "Waking the Tiger"
		}

		fire_only_once = no
		cost = 35
		
		modifier = {
			stability_weekly = 0.006 
			civilian_factory_use = 1
			ruling_party_drift = 0.01
		}
 
		days_remove = 100
		days_re_enable = 60

		complete_effect = {
				set_temp_variable = { stability_weekly = 0.006 }
				
				set_temp_variable = { duration = 100 }
							
				EAI_stability_score_debug = yes
				random_owned_controlled_state = {
					add_extra_state_shared_building_slots = -1
				}
		}
		
		ai_will_do = { 
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.008 }
				
				set_temp_variable = { duration = 100 }
				
				EAI_dynamic_stability_score = yes
			}
		}
	}	
	decrease_unemployment = {# Long time ST if ST < 0.4, cheap
		icon = consumer_goods

		available = {
			has_stability < 0.6	
		}

		visible = {
			num_of_civilian_factories_available_for_projects > 10
			has_stability < 0.6
			has_civil_war = no
			not = {
				has_idea = FRA_inflation3
				has_idea = FRA_inflation2
				has_idea = FRA_inflation1
				has_idea = Arab_hyper_inflation_5
			}
		}

		fire_only_once = no
		cost = 25
		
		modifier = {
			stability_weekly = 0.008 #11.4%
			consumer_goods_factor = 0.02
		}
 
		days_remove = 100
		days_re_enable = 60

		complete_effect = {
				set_temp_variable = { stability_weekly = 0.008 }
				
				set_temp_variable = { duration = 140 }
				
				set_temp_variable = { consumer_goods = 0.02 }
				
				EAI_stability_score_debug = yes

		}
		
		ai_will_do = { 
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.008 }
				
				set_temp_variable = { duration = 140 }
				
				set_temp_variable = { consumer_goods = 0.02 }
				
				EAI_dynamic_stability_score = yes
			}
		}
	}
	
	improve_worker_conditions = {# ST solid gain, cheap, long
		icon = generic_industry

		available = {
			has_stability < 0.8
		}

		visible = {
			num_of_civilian_factories_available_for_projects > 10
			has_stability < 0.81
			has_civil_war = no
		}

		fire_only_once = no

		modifier = {
			stability_weekly = 0.01 #17.1%
			industrial_capacity_factory = -0.05
			modifier_army_sub_unit_category_factory_attack_factor = -0.05
		}

		days_remove = 120
		days_re_enable = 120

		cost = 75

		remove_effect = {
			#add_to_variable = { worker_mood = -3 tooltip = minus_3_workmood }
			ruling_pop_plus_2 = yes
		}
		
		complete_effect = {
		
			set_temp_variable = { stability_weekly = 0.008 }
			
			set_temp_variable = { duration = 140 }
			
			
			EAI_stability_score_debug = yes
		}

		ai_will_do = {
			base = 0
			modifier = {
				add = stability_score
				set_temp_variable = { stability_weekly = 0.008 }
				
				set_temp_variable = { duration = 140 }
				
				EAI_dynamic_stability_score = yes
			}
		}
	}
	
	train_the_workforce = {
		icon = generic_research

        allowed = {
            #always = no
        }

        fire_only_once = no
		cost = 75
		
        days_re_enable = 360

        available = {
			has_tech = schools_work
        }

        visible = {
            num_of_civilian_factories > 14
			num_of_controlled_states > 4
		}
		
		days_remove = 90
		
		modifier = {
			production_factory_efficiency_gain_factor = 0.1
			production_factory_max_efficiency_factor = 0.06
			research_speed_factor = -0.03
		}
		
		complete_effect = {
			if = {
				limit = {
					has_decision = labor_laws
				}
				custom_effect_tooltip = remove_labor_laws
						
				set_country_flag = { flag = train_the_workforce value = 1 days = 2 }
			}
		}

        remove_effect = {
			#add_to_variable = { worker_mood = -3 tooltip = minus_3_workmood }
			#ruling_pop_plus_2 = yes
			
			add_stability = 0.05
			add_war_support = 0.05
		}
		
		ai_will_do = {
			base = 0
		}
    }
	
	region_anti_air = {
		icon = generic_construction

        allowed = {
           player_only_trigger = yes
        }

        fire_only_once = no
		cost = 100
		
        days_re_enable = 30

        available = {
            #Always true if visible is also true
			num_of_civilian_factories_available_for_projects  > 15
        }

        visible = {
			any_state = {
            	NOT = { has_state_flag = region_anti_air }
            	is_fully_controlled_by = ROOT
				anti_air_building < 4
            }
		}
		
		days_remove = 90
		
		modifier = {
			consumer_goods_factor = 0.05
		}

        complete_effect = {
			hidden_effect = {
				random_owned_controlled_state = {
					limit = {
						NOT = { has_state_flag = region_anti_air }
						is_fully_controlled_by = ROOT
						anti_air_building < 4
					}
					save_event_target_as = state
					set_variable = { Root.temp_region = region }
					every_state = {
						limit = {
							check_variable = { region = Prev.region }
							NOT = { has_state_flag = region_anti_air }
							is_controlled_by_ROOT_or_ally = yes
							anti_air_building < 4
						}
						add_building_construction = {
							type = anti_air_building
							level = 1
							instant_build = yes
						}
						set_state_flag = region_anti_air
					}
				}
			}
			effect_tooltip = {
				custom_effect_tooltip = REGION_TT_2
				every_state = {
					limit = {
						check_variable = { region = event_target:state.region }
						NOT = { has_state_flag = region_anti_air }
						is_controlled_by_ROOT_or_ally = yes
						anti_air_building < 4
					}
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
				}
			}
				
		}
		
		ai_will_do = {
			base = 0
			#modifier = {
			#	add = 10
			#	any_owned_state = { free_building_slots = { building = industrial_complex size < 1 include_locked = no } }
			#	has_stability > 0.80
			#}
		}
    }
	
	infrastructure_building_slot = {
		icon = generic_construction

        allowed = {
           player_only_trigger = yes
        }

        fire_only_once = no
		cost = 50
		
        days_re_enable = 30

        available = {
            #Always true if visible is also true
        }

        visible = {
			any_state = {
            	NOT = { has_state_flag = infrastructure_building_slot_flag }
            	is_fully_controlled_by = ROOT
            	is_owned_by = ROOT
				free_building_slots = {
					building = infrastructure
					size < 1
				}
            }
		}

        complete_effect = {
			hidden_effect = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = { has_state_flag = infrastructure_building_slot }
					}
					save_event_target_as = state
					set_variable = { Root.temp_region = region }
					every_state = {
						limit = {
							check_variable = { region = Prev.region }
							is_controlled_by_ROOT_or_ally = yes
						}
						add_extra_state_shared_building_slots = 1
						set_state_flag = infrastructure_building_slot
					}
				}
			}
			effect_tooltip = {
				custom_effect_tooltip = REGION_TT_2
				every_state = {
					limit = {
						check_variable = { region = event_target:state.region }
						is_controlled_by_ROOT_or_ally = yes
					}
					add_extra_state_shared_building_slots = 1
					set_state_flag = war_building_slot_flag
				}
			}
				
		}
		
		ai_will_do = {
			base = 0
			#modifier = {
			#	add = 10
			#	any_owned_state = { free_building_slots = { building = industrial_complex size < 1 include_locked = no } }
			#	has_stability > 0.80
			#}
		}
    }

    war_building_slot = {
    	icon = generic_construction

        allowed = {
            player_only_trigger = yes
        }

        fire_only_once = no
		cost = 30
		
        available = {
           #Always true if visible is true
        }

        visible = {
        	any_state = {
            	NOT = { has_state_flag = war_building_slot_flag }
            	is_fully_controlled_by = ROOT
            	is_owned_by = ROOT
            }
            has_war = yes
		}

       complete_effect = {
			hidden_effect = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = { has_state_flag = war_building_slot_flag }
					}
					save_event_target_as = state
					set_variable = { Root.temp_region = region }
					every_state = {
						limit = {
							check_variable = { region = Prev.region }
							is_controlled_by_ROOT_or_ally = yes
						}
						add_extra_state_shared_building_slots = 2
						set_state_flag = war_building_slot_flag
					}
				}
			}
			effect_tooltip = {
				custom_effect_tooltip = REGION_TT_2
				every_state = {
					limit = {
						check_variable = { region = event_target:state.region }
						is_controlled_by_ROOT_or_ally = yes
					}
					add_extra_state_shared_building_slots = 2
					set_state_flag = war_building_slot_flag
				}
			}
				
		}
		
		ai_will_do = {
			base = 0
			#modifier = {
			#	add = 10
			#	any_owned_state = { free_building_slots = { building = industrial_complex size < 1 include_locked = no } }
			#	has_stability > 0.80
			#}
		}
    }
}

foreign_support = {

###  #  # ###  #   #  ##      ###   ##   ##  ###  
#  # #  # #  # ## ## #  #     #  # #  # #  # #  # 
###  #  # ###  # # # ####     ###  #  # #### #  # 
#  # #  # #  # #   # #  #     #  # #  # #  # #  # 
###   ##  #  # #   # #  #     #  #  ##  #  # ###  

	 ##  #    ##   ## ### 
	#  # #   #  # #   #   
	#    #   #  #  #  ##  
	#  # #   #  #   # #   
	 ##  ###  ##  ##  ###
	CHI_close_burma_road = {
		allowed = {
			#Everyone
		}

		available = {
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Mengzi
				785 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Puer
				
				288 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Burma
				919 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Rakhine State
				
				640 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Mandalay
				872 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Northern Burma
			}			
		}

		visible = {
			is_subject = no
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Mengzi
				785 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Puer
				
				288 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Burma
				919 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Rakhine State
				
				640 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Mandalay
				872 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_burma_road } #Northern Burma
			}
			any_other_country = {
				check_variable = { CHI_burma_road_current_level > 0 }
				NOT = { is_in_faction_with = ROOT } 
			}
			#any_state = {
			#	OR = {
			#		is_controlled_by = ROOT
			#		CONTROLLER = { is_subject_of = ROOT }
			#	}
			#	has_state_flag = CHI_needed_for_burma_road
			#}
		}

		fire_only_once = no
		cost = 0

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				any_country = {
					check_variable = { CHI_burma_road_current_level > 0 }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					NOT = { has_war_with = ROOT }
				}
			}
			modifier = {
				factor = 200
				any_country = {
					check_variable = { CHI_burma_road_current_level > 0 }
					OR = {
						has_war_with = ROOT
						AND = {
							is_subject = yes
							NOT = { is_subject_of = ROOT }
							NOT = { is_in_faction_with = ROOT }
						}
					}
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = {
						has_state_flag = CHI_needed_for_burma_road
						OR = {
							is_controlled_by = ROOT
							CONTROLLER = { is_subject_of = ROOT }
						}
					}
					set_state_flag = CHI_burma_road_closed_state
				}
			}
			random_country = {
				#Country that had the route
				limit = { check_variable = { CHI_burma_road_current_level > 0 } }
				hidden_effect = {					
					set_variable = { tempvar = 0 }
					subtract_from_variable = { var = tempvar value = CHI_burma_road_current_level }

					add_offsite_building = { type = arms_factory level = tempvar }
					#In case we need to reopen
					set_variable = { CHI_burma_road_closed_level = CHI_burma_road_current_level }
					set_variable = { CHI_burma_road_current_level = 0 }
					clear_variable = tempvar
				}
				country_event = { id = wtt_burma_road.2 }
				custom_effect_tooltip = close_burma_road_explanation # Prints the contents of the CHI_burma_road_current_level variable
			}
		}
	}
	###  ###  ##  ###  ### #  # 
	#  # #   #  # #  # #   ## # 
	###  ##  #  # ###  ##  # ## 
	#  # #   #  # #    #   #  # 
	#  # ###  ##  #    ### #  # 
	CHI_reopen_burma_road = {
		allowed = {
			#Everyone
		}

		available = {
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_burma_road_closed_state } #Mengzi
				785 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_burma_road_closed_state } #Puer
				
				288 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_burma_road_closed_state } #Burma
				919 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_burma_road_closed_state } #Rakhine State
				
				640 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_burma_road_closed_state } #Mandalay
				872 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_burma_road_closed_state } #Northern Burma
			}
		}

		visible = {
			is_subject = no
			OR = {
				784 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_burma_road_closed_state } #Mengzi
				785 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_burma_road_closed_state } #Puer
				
				288 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_burma_road_closed_state } #Burma
				919 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_burma_road_closed_state } #Rakhine State
				
				640 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_burma_road_closed_state } #Mandalay
				872 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_burma_road_closed_state } #Northern Burma
			}
			any_country = {
				check_variable = { CHI_burma_road_closed_level > 0 }
				NOT = { has_war_with = ROOT }
			}
			#any_state = {
			#	has_state_flag = CHI_burma_road_closed_state
			#	OR = {
			#		is_controlled_by = ROOT
			#		CONTROLLER = {
			#			OR = {
			#				is_subject_of = ROOT
			#				check_variable = { CHI_burma_road_closed_level > 0 }
			#			}
			#		}
			#	}
			#}
		}

		fire_only_once = no
		cost = 0

		modifier = {
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 200
				any_country = {
					check_variable = { CHI_burma_road_closed_level > 0 }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					NOT = { has_war_with = ROOT }
				}
			}
			modifier = {
				factor = 0
				any_country = {
					check_variable = { CHI_burma_road_closed_level > 0 }
					OR = {
						has_war_with = ROOT
						AND = {
							is_subject = yes
							NOT = { is_subject_of = ROOT }
							NOT = { is_in_faction_with = ROOT }
						}
					}
				}
			}
		}

		complete_effect = {
			every_state = {
				limit = {
					has_state_flag = CHI_burma_road_closed_state
					OR = {
						is_controlled_by = ROOT
						CONTROLLER = {
							OR = {
								is_subject_of = ROOT
								check_variable = { CHI_burma_road_closed_level > 0 }
							}
						}
					}
				}
				custom_effect_tooltip = CHI_burma_road_reopen_state
				clr_state_flag = CHI_burma_road_closed_state
			}

			random_country = {
				limit = { check_variable = { CHI_burma_road_closed_level > 0 } }
				if = {
					limit = {
						any_state = {
							has_state_flag = CHI_burma_road_closed_state							
							NOT = { is_controlled_by = ROOT }
							CONTROLLER = {
								NOT = { is_subject_of = ROOT }
								NOT = { check_variable = { CHI_burma_road_closed_level > 0 } }
							}
						}
					}
					country_event = { id = wtt_burma_road.3 } #We opened our part of the road
				}
				else = {
					#Road is fully reopened
					if = {
						limit = { NOT = { tag = ROOT } }
						country_event = { id = wtt_burma_road.4 }
					}
					hidden_effect = {					
						add_offsite_building = { type = arms_factory level = CHI_burma_road_closed_level }
						set_variable = { CHI_burma_road_current_level = CHI_burma_road_closed_level }
						clear_variable = CHI_burma_road_closed_level 
					}
					custom_effect_tooltip = reopen_burma_road_explanation # Prints the contents of the CHI_burma_road_closed_level variable
				}
			}
		}
	}
#   ### ###   ##      ###   ##   ##  ###  
#   #   #  # #  #     #  # #  # #  # #  # 
#   ##  #  # #  #     ###  #  # #### #  # 
#   #   #  # #  #     #  # #  # #  # #  # 
### ### ###   ##      #  #  ##  #  # ###  
	
	 ##  #    ##   ## ### 
	#  # #   #  # #   #   
	#    #   #  #  #  ##  
	#  # #   #  #   # #   
	 ##  ###  ##  ##  ###
	CHI_close_ledo_road = {
		allowed = {
			#Everyone
		}

		available = {
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Mengzi
				785 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Puer
				
				432 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Assam
				
				640 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Mandalay
				872 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Northern Burma
			}		
		}

		visible = {
			is_subject = no
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Mengzi
				785 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Puer
				
				432 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Assam
				
				640 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Mandalay
				872 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_ledo_road } #Northern Burma
			}
			any_country = {
				check_variable = { CHI_ledo_road_current_level > 0 }
				NOT = { is_in_faction_with = ROOT }
				NOT = { tag = ROOT }
			}
		}

		fire_only_once = no
		cost = 0

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				any_country = {
					check_variable = { CHI_ledo_road_current_level > 0 }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					NOT = { has_war_with = ROOT }
				}
			}
			modifier = {
				factor = 200
				any_country = {
					check_variable = { CHI_ledo_road_current_level > 0 }
					OR = {
						has_war_with = ROOT
						AND = {
							is_subject = yes
							NOT = { is_subject_of = ROOT }
							NOT = { is_in_faction_with = ROOT }
						}
					}
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = {
						has_state_flag = CHI_needed_for_ledo_road
						OR = {
							is_controlled_by = ROOT
							CONTROLLER = { is_subject_of = ROOT }
						}
					}
					set_state_flag = CHI_ledo_road_closed_state
				}
			}
			random_country = {
				#Country that had the route
				limit = { check_variable = { CHI_ledo_road_current_level > 0 } }
				hidden_effect = {					
					set_variable = { tempvar = 0 }
					subtract_from_variable = { var = tempvar value = CHI_ledo_road_current_level }

					add_offsite_building = { type = arms_factory level = tempvar }
					#In case we need to reopen
					set_variable = { CHI_ledo_road_closed_level = CHI_ledo_road_current_level }
					set_variable = { CHI_ledo_road_current_level = 0 }
					clear_variable = tempvar
				}
				country_event = { id = wtt_ledo_road.2 }
				custom_effect_tooltip = close_ledo_road_explanation # Prints the contents of the CHI_ledo_road_current_level variable
			}
		}
	}

	###  ###  ##  ###  ### #  # 
	#  # #   #  # #  # #   ## # 
	###  ##  #  # ###  ##  # ## 
	#  # #   #  # #    #   #  # 
	#  # ###  ##  #    ### #  # 
	CHI_reopen_ledo_road = {
		allowed = {
			#Everyone
		}

		available = {
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_ledo_road_closed_state } #Mengzi
				785 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_ledo_road_closed_state } #Puer
				
				432 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_ledo_road_closed_state } #Assam
				
				640 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_ledo_road_closed_state } #Mandalay
				872 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_ledo_road_closed_state } #Northern Burma
			}	
		}

		visible = {
			is_subject = no
			OR = {
				784 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_ledo_road_closed_state } #Mengzi
				785 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_ledo_road_closed_state } #Puer
				
				288 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_ledo_road_closed_state } #Burma
				919 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_ledo_road_closed_state } #Rakhine State
				
				640 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_ledo_road_closed_state } #Mandalay
				872 = { OR = { CONTROLLER = { check_variable = { CHI_burma_road_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_ledo_road_closed_state } #Northern Burma
			}
			any_country = {
				check_variable = { CHI_ledo_road_closed_level > 0 }
				NOT = { has_war_with = ROOT }
			}
			#any_state = {
			#	has_state_flag = CHI_ledo_road_closed_state
			#	OR = {
			#		is_controlled_by = ROOT
			#		CONTROLLER = {
			#			OR = {
			#				is_subject_of = ROOT
			#				check_variable = { CHI_ledo_road_closed_level > 0 }
			#			}
			#		}
			#	}
			#}
		}

		fire_only_once = no
		cost = 0

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 200
				any_country = {
					check_variable = { CHI_ledo_road_closed_level > 0 }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					NOT = { has_war_with = ROOT }
				}
			}
			modifier = {
				factor = 0
				any_country = {
					check_variable = { CHI_ledo_road_closed_level > 0 }
					OR = {
						has_war_with = ROOT
						AND = {
							is_subject = yes
							NOT = { is_subject_of = ROOT }
							NOT = { is_in_faction_with = ROOT }
						}
					}
				}
			}
		}

		complete_effect = {
			every_state = {
				limit = {
					has_state_flag = CHI_ledo_road_closed_state
					OR = {
						is_controlled_by = ROOT
						CONTROLLER = {
							OR = {
								is_subject_of = ROOT
								check_variable = { CHI_ledo_road_closed_level > 0 }
							}
						}
					}
				}
				custom_effect_tooltip = CHI_ledo_road_reopen_state
				clr_state_flag = CHI_ledo_road_closed_state
			}

			random_country = {
				limit = { check_variable = { CHI_ledo_road_closed_level > 0 } }
				if = {
					limit = {
						any_state = {
							has_state_flag = CHI_ledo_road_closed_state							
							NOT = { is_controlled_by = ROOT }
							CONTROLLER = {
								NOT = { is_subject_of = ROOT }
								NOT = { check_variable = { CHI_ledo_road_closed_level > 0 } }
							}
						}
					}
					country_event = { id = wtt_ledo_road.3 } #We opened our part of the road
				}
				else = {
					#Road is fully reopened
					if = {
						limit = { NOT = { tag = ROOT } }
						country_event = { id = wtt_ledo_road.4 }
					}
					hidden_effect = {					
						add_offsite_building = { type = arms_factory level = CHI_ledo_road_closed_level }
						set_variable = { CHI_ledo_road_current_level = CHI_ledo_road_closed_level }
						clear_variable = CHI_ledo_road_closed_level
					}
					custom_effect_tooltip = reopen_ledo_road_explanation # Prints the contents of the CHI_ledo_road_closed_level variable
				}
			}
		}
	}

### #  # ###     #  # #  # #   # ###  
 #  #  # #       #  # #  # ## ## #  # 
 #  #### ##      #### #  # # # # ###  
 #  #  # #       #  # #  # #   # #    
 #  #  # ###     #  #  ##  #   # #

	 ##  #    ##   ## ### 
	#  # #   #  # #   #   
	#    #   #  #  #  ##  
	#  # #   #  #   # #   
	 ##  ###  ##  ##  ### 
 	CHI_close_the_hump = {
 		allowed = {
 			#Everyone
 		}

 		available = {
			OR = {
				434 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_the_hump } #Arunachal Pradesh
				601 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_the_hump } #Xikang
			}		
 		}

 		visible = {
 			is_subject = no
			OR = {
				434 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_the_hump } #Arunachal Pradesh
				601 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_the_hump } #Xikang
			}
			any_country = {
 				check_variable = { CHI_the_hump_current_level > 0 }
 				NOT = { is_in_faction_with = ROOT }
 				NOT = { tag = ROOT }
 			}
 		}

 		fire_only_once = no
 		cost = 0

 		ai_will_do = {
 			factor = 1
			modifier = {
				factor = 0
				any_country = {
					check_variable = { CHI_the_hump_current_level > 0 }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					NOT = { has_war_with = ROOT }
				}
			}
			modifier = {
				factor = 200
				any_country = {
					check_variable = { CHI_the_hump_current_level > 0 }
					OR = {
						has_war_with = ROOT
						AND = {
							is_subject = yes
							NOT = { is_subject_of = ROOT }
							NOT = { is_in_faction_with = ROOT }
						}
					}
				}
			}
 		}

 		complete_effect = {
 			hidden_effect = {
 				every_state = {
 					limit = {
 						has_state_flag = CHI_needed_for_the_hump
 						OR = {
 							is_controlled_by = ROOT
 							CONTROLLER = { is_subject_of = ROOT }
 						}
 					}
 					set_state_flag = CHI_the_hump_closed_state
 				}
 			}
 			random_country = {
 				#Country that had the route
 				limit = { check_variable = { CHI_the_hump_current_level > 0 } }
 				hidden_effect = {					
 					set_variable = { tempvar = 0 }
 					subtract_from_variable = { var = tempvar value = CHI_the_hump_current_level }

 					add_offsite_building = { type = arms_factory level = tempvar }
 					#In case we need to reopen
 					set_variable = { CHI_the_hump_closed_level = CHI_the_hump_current_level }
 					set_variable = { CHI_the_hump_current_level = 0 }
 					clear_variable = tempvar
 				}
 				country_event = { id = wtt_the_hump.2 }
				custom_effect_tooltip = close_the_hump_explanation # Prints the contents of the CHI_the_hump_current_level variable
 			}
 		}
 	}

 	###  ###  ##  ###  ### #  # 
 	#  # #   #  # #  # #   ## # 
 	###  ##  #  # ###  ##  # ## 
 	#  # #   #  # #    #   #  # 
 	#  # ###  ##  #    ### #  # 
 	CHI_reopen_the_hump = {
 		allowed = {
 			#Everyone
 		}

 		available = {
			OR = {
				434 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_the_hump_closed_state } #Arunachal Pradesh
				601 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_the_hump_closed_state } #Xikang
			}
 		}

 		visible = {
 			is_subject = no
			OR = {
				434 = { OR = { CONTROLLER = { check_variable = { CHI_the_hump_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_the_hump_closed_state } #Arunachal Pradesh
				601 = { OR = { CONTROLLER = { check_variable = { CHI_the_hump_closed_level > 0 } } is_controlled_by_ROOT_or_subject = yes } has_state_flag = CHI_the_hump_closed_state } #Xikang
			}
 			any_country = {
 				check_variable = { CHI_the_hump_closed_level > 0 }
 				NOT = { has_war_with = ROOT }
 			}
 			#any_state = {
 			#	has_state_flag = CHI_the_hump_closed_state
 			#	OR = {
 			#		is_controlled_by = ROOT
 			#		CONTROLLER = {
 			#			OR = {
 			#				is_subject_of = ROOT
 			#				check_variable = { CHI_the_hump_closed_level > 0 }
 			#			}
 			#		}
 			#	}
 			#}
 		}

 		fire_only_once = no
 		cost = 0

 		modifier = {
 		}

 		ai_will_do = {
 			factor = 1
			modifier = {
				factor = 200
				any_country = {
					check_variable = { CHI_the_hump_closed_level > 0 }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					NOT = { has_war_with = ROOT }
				}
			}
			modifier = {
				factor = 0
				any_country = {
					check_variable = { CHI_the_hump_closed_level > 0 }
					OR = {
						has_war_with = ROOT
						AND = {
							is_subject = yes
							NOT = { is_subject_of = ROOT }
							NOT = { is_in_faction_with = ROOT }
						}
					}
				}
			}
 		}

 		complete_effect = {
 			every_state = {
 				limit = {
 					has_state_flag = CHI_the_hump_closed_state
 					OR = {
 						is_controlled_by = ROOT
 						CONTROLLER = {
 							OR = {
 								is_subject_of = ROOT
 								check_variable = { CHI_the_hump_closed_level > 0 }
 							}
 						}
 					}
 				}
 				custom_effect_tooltip = CHI_the_hump_reopen_state
 				clr_state_flag = CHI_the_hump_closed_state
 			}

 			random_country = {
 				limit = { check_variable = { CHI_the_hump_closed_level > 0 } }
 				if = {
 					limit = {
 						any_state = {
 							has_state_flag = CHI_the_hump_closed_state							
 							NOT = { is_controlled_by = ROOT }
 							CONTROLLER = {
 								NOT = { is_subject_of = ROOT }
 								NOT = { check_variable = { CHI_the_hump_closed_level > 0 } }
 							}
 						}
 					}
 					country_event = { id = wtt_the_hump.3 } #We opened our part of the road
 				}
 				else = {
 					#Road is fully reopened
 					if = {
 						limit = { NOT = { tag = ROOT } }
 						country_event = { id = wtt_the_hump.4 }
 					}
 					hidden_effect = {					
 						add_offsite_building = { type = arms_factory level = CHI_the_hump_closed_level }
 						set_variable = { CHI_the_hump_current_level = CHI_the_hump_closed_level }
 						clear_variable = CHI_the_hump_closed_level
 					}
					custom_effect_tooltip = reopen_the_hump_explanation # Prints the contents of the CHI_the_hump_closed_level variable
 				}
 			}
 		}
 	}

#  #  ##  #  #  ##  ###     ###   ##  #  # ### ### 
#  # #  # ## # #  #  #      #  # #  # #  #  #  #   
#### #### # ## #  #  #      ###  #  # #  #  #  ##  
#  # #  # #  # #  #  #      #  # #  # #  #  #  #   
#  # #  # #  #  ##  ###     #  #  ##   ##   #  ### 

	 ##  #    ##   ## ### 
	#  # #   #  # #   #   
	#    #   #  #  #  ##  
	#  # #   #  #   # #   
	 ##  ###  ##  ##  ###
	CHI_close_hanoi_route = {
		allowed = {
			#Everyone
		}

		available = {
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_hanoi_route } #Mengzi
				671 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_hanoi_route } #Tonking
			}
		}

		visible = {
			is_subject = no
			OR = {
				784 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_hanoi_route } #Mengzi
				671 = { is_controlled_by_ROOT_or_subject = yes has_state_flag = CHI_needed_for_hanoi_route } #Tonking
			}
			any_country = {
				check_variable = { CHI_hanoi_route_current_level > 0 }
				NOT = { is_in_faction_with = ROOT }
				NOT = { tag = ROOT }
			}
		}

		fire_only_once = no
		cost = 0

		modifier = {
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				any_country = {
					check_variable = { CHI_hanoi_route_current_level > 0 }
					OR = {
						is_subject = no
						is_subject_of = ROOT
						is_in_faction_with = ROOT
					}
					NOT = { has_war_with = ROOT }
				}
			}
			modifier = {
				factor = 200
				any_country = {
					check_variable = { CHI_hanoi_route_current_level > 0 }
					OR = {
						has_war_with = ROOT
						AND = {
							is_subject = yes
							NOT = { is_subject_of = ROOT }
							NOT = { is_in_faction_with = ROOT }
						}
					}
				}
			}
		}

		complete_effect = {
			hidden_effect = {
				every_state = {
					limit = {
						has_state_flag = CHI_needed_for_hanoi_route
						OR = {
							is_controlled_by = ROOT
							CONTROLLER = { is_subject_of = ROOT }
						}
					}
					set_state_flag = CHI_hanoi_route_closed_state
				}
			}
			random_country = {
				#Country that had the route
				limit = { check_variable = { CHI_hanoi_route_current_level > 0 } }
				hidden_effect = {					
					set_variable = { tempvar = 0 }
					subtract_from_variable = { var = tempvar value = CHI_hanoi_route_current_level }

					add_offsite_building = { type = arms_factory level = tempvar }
					#In case we need to reopen
					set_variable = { CHI_hanoi_route_closed_level = CHI_hanoi_route_current_level }
					set_variable = { CHI_hanoi_route_current_level = 0 }
					clear_variable = tempvar
				}
				country_event = { id = wtt_hanoi_route.2 }
				custom_effect_tooltip = close_hanoi_route_explanation # Prints the contents of the CHI_hanoi_route_current_level variable
			}
		}
	}
}
